/*
 * UART.cpp
 *
 *  Created on: Apr 18, 2014
 *      Author: Jan Huggler
 */

#include "UART.h"
#include "uart.h"

UART::UART(Observer *obsv) {
	// TODO Auto-generated constructor stub
    NVIC_InitTypeDef NVICInitStructure;
    USART_InitTypeDef      USARTInitStructre;
	observer = obsv;

	CARME_UART_GPIO_Init();

    NVIC_InitTypeDef NVICInitStructure;
    USART_InitTypeDef      USARTInitStructre;

	/* USART1 configuration */
    USART_StructInit(&USARTInitStructre);
    USARTInitStructre.USART_BaudRate = 115200;
    CARME_UART_Init(CARME_UART0, &USARTInitStructre);

    /* Enabling interrupt from USART1 */
    NVICInitStructure.NVIC_IRQChannel = USART1_IRQn;
    NVICInitStructure.NVIC_IRQChannelPreemptionPriority = 12;
    NVICInitStructure.NVIC_IRQChannelSubPriority = 0;
    NVICInitStructure.NVIC_IRQChannelCmd = ENABLE;
    NVIC_Init(&NVICInitStructure);

    /* Receive Data register not empty interrupt */
    USART_ITConfig(USART1, USART_IT_RXNE, ENABLE);
}

UART::~UART() {
	// TODO Auto-generated destructor stub
}

UART::UARTRecInt(){
	obsv->update();
}

UART::UARTSendInt(){

}

UART::sendString(String sendStr){
	temp = new char[UART_SND_BUF_SIZE];

	sendBufferList.push_back(temp);
}

String UART::receiveString(){

}
